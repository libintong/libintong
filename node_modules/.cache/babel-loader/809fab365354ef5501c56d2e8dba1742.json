{"ast":null,"code":"var _jsxFileName = \"/Users/heytea/lbt-music/src/components/playbar/11.js\";\nimport React, { Component } from \"react\";\nimport \"./pack.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Audio extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: \"https://music.163.com/song/media/outer/url?id=1349292048.mp3\",\n      //歌曲地址\n      current: \"00:00\",\n      //当前时间\n      allTime: \"00:00\" //当前歌曲时长\n\n    };\n    this.outer = /*#__PURE__*/React.createRef(); //自定义进度条外框\n\n    this.inner = /*#__PURE__*/React.createRef(); //自定义进度条内核\n\n    this.audio = /*#__PURE__*/React.createRef();\n    this.audioX = this.audioX.bind(this);\n    this.canplay = this.canplay.bind(this);\n    this.timeUpdate = this.timeUpdate.bind(this);\n    this.audioPlayBackRate = this.audioPlayBackRate.bind(this);\n    this.audioPlay = this.audioPlay.bind(this);\n    this.audioStop = this.audioStop.bind(this);\n    this.audioGo = this.audioGo.bind(this);\n    this.audioBack = this.audioBack.bind(this);\n    this.audioWaiting = this.audioWaiting.bind(this);\n    this.handleAudio = this.handleAudio.bind(this);\n  }\n\n  componentDidMount() {\n    // console.log(this.audio);\n    this.canplay();\n    this.timeUpdate();\n    this.handleAudio();\n  } //在音频可以播放时就显示总时长\n\n\n  canplay() {\n    this.audio.current.oncanplay = () => {\n      var allTime = (Math.floor(this.audio.current.duration / 60) + \"\").padStart(2, \"0\") + \":\" + (Math.floor(this.audio.current.duration % 60) + \"\").padStart(2, \"0\");\n      this.setState({\n        allTime\n      });\n    };\n  }\n\n  audioWaiting() {\n    this.audio.current.onwaiting = () => {\n      alert(\"加载中\");\n    };\n  } //在音频播放时当前时间也跟着变化\n\n\n  timeUpdate() {\n    this.audio.current.ontimeupdate = () => {\n      // console.log(this.audio.current.currentTime)\n      // console.log(this.audio.current.duration)\n      var currentTime = (Math.floor(this.audio.current.currentTime / 60) + \"\").padStart(2, \"0\") + \":\" + (Math.floor(this.audio.current.currentTime % 60) + \"\").padStart(2, \"0\");\n      this.setState({\n        current: currentTime\n      });\n      this.inner.current.style.width = this.audio.current.currentTime / this.audio.current.duration * 100 + \"%\";\n    };\n  } //播放速度\n\n\n  audioPlayBackRate(str) {\n    this.audio.current.playbackRate = str;\n  } //播放开始\n\n\n  audioPlay() {\n    this.audio.current.play();\n  } //播放暂停\n\n\n  audioStop() {\n    this.audio.current.pause();\n  } //快进\n\n\n  audioGo() {\n    this.audio.current.currentTime += 20;\n  } //快退\n\n\n  audioBack() {\n    this.audio.current.currentTime -= 20;\n  } //设置播放进度\n\n\n  audioX(e) {\n    console.log(e.targetTouches[0].clientX);\n    var outerWidth = this.outer.current.offsetWidth; //父元素宽\n\n    var innerWidth = e.targetTouches[0].clientX - this.outer.current.getBoundingClientRect().left; //鼠标到可视区左侧的距离-父元素到可视区左侧的距离\n\n    if (innerWidth > outerWidth || innerWidth < 0) {\n      return;\n    }\n\n    this.inner.current.style.width = innerWidth + \"px\";\n    this.audio.current.currentTime = innerWidth / outerWidth * this.audio.current.duration;\n  }\n\n  handleAudio() {\n    let audio = this.audio.current; // timeupdate,播放位置改变时触发\n\n    audio.addEventListener(\"timeupdate\", () => {\n      console.log(\"播放位置改变\");\n    }); // canplay,表示音频可以播放了，准备就绪\n\n    audio.addEventListener(\"canplay\", () => {\n      console.log(\"可以播放了\");\n    }); // progress，音频在加载或缓冲\n\n    audio.addEventListener(\"progress\", () => {\n      console.log(\"音频在加载或缓冲\");\n    }); // waiting,需要缓冲下一帧而停止播放时触发\n\n    audio.addEventListener(\"waiting\", () => {\n      console.log(\"需要缓冲下一帧\");\n    }); // playing,音频或视频已开始播放时触发\n\n    audio.addEventListener(\"playing\", () => {\n      console.log(\"开始播放\");\n    }); // pause,音频或视频文件暂停时触发\n\n    audio.addEventListener(\"pause\", () => {\n      console.log(\"已经暂停\");\n    });\n  }\n\n  render() {\n    const {\n      url,\n      current,\n      allTime\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"onTouchMove\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"\\u5F53\\u524D\\u65F6\\u95F4\\uFF1A\", current]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"\\u603B\\u65F6\\u95F4\\uFF1A\", allTime]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"outer\",\n        ref: this.outer,\n        onTouchMove: e => this.audioX(e),\n        onTouchStart: e => this.audioX(e),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inner\",\n          ref: this.inner,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"innerBtn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: this.audio,\n        src: url,\n        controls: true,\n        children: \"\\u4F60\\u7684\\u6D4F\\u89C8\\u5668\\u4E0D\\u652F\\u6301\\u97F3\\u9891\\u64AD\\u653E\\u54E6\\uFF01(;\\xB4\\u0F0E\\u0EB6\\u0414\\u0F0E\\u0EB6`)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.audioPlay(),\n        children: \"\\u64AD\\u653E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.audioStop(),\n        children: \"\\u6682\\u505C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.audioGo(),\n        children: \"\\u5FEB\\u8FDB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.audioBack(),\n        children: \"\\u5FEB\\u9000\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.audioPlayBackRate(\"4.0\"),\n        children: \"\\u64AD\\u653E\\u901F\\u5EA64.0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Audio;","map":{"version":3,"sources":["/Users/heytea/lbt-music/src/components/playbar/11.js"],"names":["React","Component","Audio","constructor","props","state","url","current","allTime","outer","createRef","inner","audio","audioX","bind","canplay","timeUpdate","audioPlayBackRate","audioPlay","audioStop","audioGo","audioBack","audioWaiting","handleAudio","componentDidMount","oncanplay","Math","floor","duration","padStart","setState","onwaiting","alert","ontimeupdate","currentTime","style","width","str","playbackRate","play","pause","e","console","log","targetTouches","clientX","outerWidth","offsetWidth","innerWidth","getBoundingClientRect","left","addEventListener","render"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport \"./pack.css\";\n\nclass Audio extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            url: \"https://music.163.com/song/media/outer/url?id=1349292048.mp3\", //歌曲地址\n            current: \"00:00\", //当前时间\n            allTime: \"00:00\", //当前歌曲时长\n        };\n        this.outer = React.createRef(); //自定义进度条外框\n        this.inner = React.createRef(); //自定义进度条内核\n        this.audio = React.createRef();\n        this.audioX = this.audioX.bind(this);\n        this.canplay = this.canplay.bind(this);\n        this.timeUpdate = this.timeUpdate.bind(this);\n        this.audioPlayBackRate = this.audioPlayBackRate.bind(this);\n        this.audioPlay = this.audioPlay.bind(this);\n        this.audioStop = this.audioStop.bind(this);\n        this.audioGo = this.audioGo.bind(this);\n        this.audioBack = this.audioBack.bind(this);\n        this.audioWaiting = this.audioWaiting.bind(this);\n        this.handleAudio = this.handleAudio.bind(this);\n    }\n\n    componentDidMount() {\n        // console.log(this.audio);\n        this.canplay();\n        this.timeUpdate();\n        this.handleAudio();\n    }\n\n    //在音频可以播放时就显示总时长\n    canplay() {\n        this.audio.current.oncanplay = () => {\n            var allTime =\n                (Math.floor(this.audio.current.duration / 60) + \"\").padStart(2, \"0\") +\n                \":\" +\n                (Math.floor(this.audio.current.duration % 60) + \"\").padStart(2, \"0\");\n            this.setState({\n                allTime\n            });\n        };\n    }\n\n    audioWaiting() {\n        this.audio.current.onwaiting = () => {\n            alert(\"加载中\");\n        };\n    }\n\n    //在音频播放时当前时间也跟着变化\n    timeUpdate() {\n        this.audio.current.ontimeupdate = () => {\n            // console.log(this.audio.current.currentTime)\n            // console.log(this.audio.current.duration)\n            var currentTime =\n                (Math.floor(this.audio.current.currentTime / 60) + \"\").padStart(2, \"0\")\n                + \":\" +\n                (Math.floor(this.audio.current.currentTime % 60) + \"\").padStart(2, \"0\");\n            this.setState({\n                current: currentTime\n            });\n            this.inner.current.style.width =\n                (this.audio.current.currentTime / this.audio.current.duration) * 100 +\n                \"%\";\n        };\n    }\n\n    //播放速度\n    audioPlayBackRate(str) {\n        this.audio.current.playbackRate = str;\n    }\n\n    //播放开始\n    audioPlay() {\n        this.audio.current.play();\n    }\n\n    //播放暂停\n    audioStop() {\n        this.audio.current.pause();\n    }\n\n    //快进\n    audioGo() {\n        this.audio.current.currentTime += 20;\n    }\n\n    //快退\n    audioBack() {\n        this.audio.current.currentTime -= 20;\n    }\n\n    //设置播放进度\n    audioX(e) {\n        console.log(e.targetTouches[0].clientX);\n        var outerWidth = this.outer.current.offsetWidth; //父元素宽\n        var innerWidth =\n            e.targetTouches[0].clientX -\n            this.outer.current.getBoundingClientRect().left; //鼠标到可视区左侧的距离-父元素到可视区左侧的距离\n        if (innerWidth > outerWidth || innerWidth < 0) {\n            return;\n        }\n        this.inner.current.style.width = innerWidth + \"px\";\n        this.audio.current.currentTime =\n            (innerWidth / outerWidth) * this.audio.current.duration;\n    }\n\n    handleAudio() {\n        let audio = this.audio.current;\n        // timeupdate,播放位置改变时触发\n        audio.addEventListener(\"timeupdate\", () => {\n            console.log(\"播放位置改变\");\n        });\n        // canplay,表示音频可以播放了，准备就绪\n        audio.addEventListener(\"canplay\", () => {\n            console.log(\"可以播放了\");\n        });\n        // progress，音频在加载或缓冲\n        audio.addEventListener(\"progress\", () => {\n            console.log(\"音频在加载或缓冲\");\n        });\n        // waiting,需要缓冲下一帧而停止播放时触发\n        audio.addEventListener(\"waiting\", () => {\n            console.log(\"需要缓冲下一帧\");\n        });\n        // playing,音频或视频已开始播放时触发\n        audio.addEventListener(\"playing\", () => {\n            console.log(\"开始播放\");\n        });\n        // pause,音频或视频文件暂停时触发\n        audio.addEventListener(\"pause\", () => {\n            console.log(\"已经暂停\");\n        });\n    }\n\n    render() {\n        const {url, current, allTime} = this.state;\n        return (\n            <div>\n                <h1>onTouchMove</h1>\n                <h1>当前时间：{current}</h1>\n                <h1>总时间：{allTime}</h1>\n                <div\n                    className=\"outer\"\n                    ref={this.outer}\n                    onTouchMove={e => this.audioX(e)}\n                    onTouchStart={e => this.audioX(e)}\n                >\n                    <div className=\"inner\" ref={this.inner}>\n                        <div className=\"innerBtn\"></div>\n                    </div>\n                </div>\n                <br/>\n                <br/>\n                <br/>\n                <audio ref={this.audio} src={url} controls>\n                    你的浏览器不支持音频播放哦！(;´༎ຶД༎ຶ`)\n                </audio>\n                <button onClick={() => this.audioPlay()}>播放</button>\n                <button onClick={() => this.audioStop()}>暂停</button>\n                <button onClick={() => this.audioGo()}>快进</button>\n                <button onClick={() => this.audioBack()}>快退</button>\n                <button onClick={() => this.audioPlayBackRate(\"4.0\")}>\n                    播放速度4.0\n                </button>\n            </div>\n        );\n    }\n}\n\nexport default Audio;"]},"metadata":{},"sourceType":"module"}